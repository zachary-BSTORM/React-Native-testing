# Pour le testing en react-native Jest est un outil populaire. 

### Création du projet avec expo et installation de Jest 

- Pour créer un projet avec Expo, utilisez la commande suivante :
```bash
npx create-expo-app my-test-app
```


### Reinitialiser le projet Expo
- La commande pour réinitialiser le projet Expo est la suivante :
```bash
npm run reset-project
```

# Installation Pour les tests

1. Installez les dépendances nécessaires pour Jest en utilisant la commande suivante :
```bash
npx expo install jest-expo jest @types/jest --dev
```

2. Ajoutez un script de test dans le fichier `package.json` pour exécuter Jest en mode watch. Modifiez la section "scripts" comme suit :
```json
"scripts": {
  "test": "jest --watchAll",
}
```

3. Ajouter la configuration Jest dans le fichier `package.json` pour utiliser le preset `jest-expo`. Ajoutez la section suivante :
```json
"jest": {
    "preset": "jest-expo",
    "transformIgnorePatterns": [
      "node_modules/(?!(?:.pnpm/)?((jest-)?react-native|@react-native(-community)?|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@sentry/react-native|native-base|react-native-svg))"
    ]
  },
```

4. Installer react-test-renderer pour le rendu des composants lors des tests :
```bash
npm install --save-dev react-test-renderer@19.1.0
```


5. On retrouve une erreur qui nous informe que le jsx n'est pas défini. Il faut ajouter une information dans le fichier `tsconfig.json` pour résoudre ce problème. Ajoutez ou modifiez la section `compilerOptions` comme suit :
```json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "jsx": "react-jsx", -- Ajouter cette ligne si elle n'existe pas
    "types": ["jest"],  -- Ajouter cette ligne si elle n'existe pas
    "strict": true,
    "paths": {
      "@/*": [
        "./*"
      ]
    }
  },
  "include": [
    "**/*.ts",
    "**/*.tsx",
    ".expo/types/**/*.ts",
    "expo-env.d.ts"
  ]
}
```

6. Ensuite Nous devons ajouter un fichier 'react-test-renderer.d.ts' dans le dossier 'types' à la racine du projet pour que TypeScript reconnaisse les types de 'react-test-renderer'. Le contenu du fichier doit être le suivant :
```typescript
declare module "react-test-renderer";
```




