# Pour le testing en react-native Jest est un outil populaire. 

### Création du projet avec expo et installation de Jest 

- Pour créer un projet avec Expo, utilisez la commande suivante :
```bash
npx create-expo-app my-test-app
```


### Reinitialiser le projet Expo
- La commande pour réinitialiser le projet Expo est la suivante :
```bash
npm run reset-project
```

# Installation des dépendances pour Jest

1. Jest (framework de test)
```bash
npm install --save-dev jest
```

2. 
```bash
npm init jest@latest
```

3. Installation des bibliothèques supplémentaires pour le testing avec React Native :
```sh
  npm install --save-dev @testing-library/react @testing-library/jest-dom
```

npm install --save-dev jest-expo
```bash
npm install --save-dev jest-expo
```

- Plusieurs questions vous seront posées pour configurer Jest. 
  - create-jest@30.2.0 : y
  - Would you like to use Typescript for the configuration file? ... yes
  - Choose the test environment that will be used for testing » node
  - Do you want Jest to add coverage reports? ... yes
  - Which provider should be used to instrument code for coverage? » v8
  - Automatically clear mock calls, instances, contexts and results before every test? ... yes

# Implementation des tests 

- Pour implémenter les tests, vous devez créer un dossier `tests` à la racine de votre projet.

- Nous allons créer un fichier matj.js et un fichier math.test.js pour tester des fonctions mathématiques simples et voir comment Jest fonctionne.

### Fichier math.js
```javascript
function sum(a, b) {
  return a + b;
}

function multiply(a, b) {
  return a * b;
}

function divide(a, b) {
  if (b === 0) {
    throw new Error("Division by zero is not allowed.");
  }
    return a / b;
}

function subtract(a, b) {
  return a - b;
}
    
module.exports = { sum, multiply, divide, subtract };
```

### Fichier math.test.js
```javascript
const { sum, multiply, divide, subtract } = require("./math");

describe("Math functions testing", () => {

  test("sum adds numbers", () => {
    expect(sum(2, 3)).toBe(5);
  });

  test("subtract subtracts numbers", () => {
    expect(subtract(5, 2)).toBe(3);
  });

  test("multiply multiplies numbers", () => {
    expect(multiply(3, 4)).toBe(12);
  });

  test("divide divides numbers", () => {
    expect(divide(10, 2)).toBe(5);
  });

  test("divide handles division by zero", () => {
    expect(() => divide(10, 0)).toThrow("Division by zero is not allowed.");
  });

  test("divide throws an error when dividing by zero", () => {
    expect(() => divide(5, 0)).toThrow("Division by zero is not allowed.");
  });
  
});
```

### Exécution des tests
- Pour exécuter les tests, utilisez la commande suivante dans le terminal à la racine de votre projet qui à été ajouté dans le package.json :
```bash
npm test
```