# Comment ecrire des tests avec Jest

- Une fois la nase implémenter , il faut provéder à la configuration de Jest.


# Configuration de Jest

## Dépendances à installer pour les tests (Expo/React Native/React 19)

1. jest (runner de test)
  ```sh
  npm install --save-dev jest
  ```
2. jest-expo (preset pour Expo/React Native)
  ```sh
  npm install --save-dev jest-expo
  ```
3. @testing-library/react-native (tests de composants React Native)
  ```sh
  npm install --save-dev @testing-library/react-native
  ```
4. @testing-library/jest-native (assertions spécifiques React Native)
  ```sh
  npm install --save-dev @testing-library/jest-native
  ```
5. jest-html-reporter (rapport HTML des tests)
  ```sh
  npm install --save-dev jest-html-reporter
  ```

**Commande unique pour tout installer :**
```sh
npm install --save-dev jest jest-expo @testing-library/react-native @testing-library/jest-native jest-html-reporter react-test-renderer@19.1.0 --legacy-peer-deps
```



### Première étape pour l'ecriture des tests avec Jest

- Créez un fichier `jest.config.js` à la racine de votre projet avec le contenu suivant :
```javascript
module.exports = {
  preset: 'react-native',
  setupFilesAfterEnv: ['@testing-library/jest-native/extend-expect'],
  transformIgnorePatterns: [
    'node_modules/(?!(jest-)?react-native|@react-native|@react-navigation|@testing-library)',
  ],
};
```

- Ce fichier configure Jest pour qu'il fonctionne correctement avec React Native et les bibliothèques de test.

- Ajoutez également un fichier `setupTests.js` à la racine de votre projet pour configurer l'environnement de test :
```javascript
import '@testing-library/jest-native/extend-expect';
import 'react-native-gesture-handler/jestSetup';
jest.mock('react-native-reanimated', () => require('react-native-reanimated/mock'));
jest.mock('react-native/Libraries/Animated/NativeAnimatedHelper');
```
- Ce fichier configure Jest pour utiliser les extensions de Jest Native et gère les mocks nécessaires pour certaines bibliothèques React Native.

### Ajout de scripts de test dans package.json
- Ajoutez les scripts suivants dans votre `package.json` pour faciliter l'exécution des tests :
```json
"scripts": {
  "test": "jest",
  "test:watch": "jest --watch"
}
```
### Exécution des tests
- Vous pouvez maintenant exécuter vos tests en utilisant la commande suivante :
```bash
npm test
```

- Pour exécuter les tests en mode watch, utilisez :
```bash
npm run test:watch
```